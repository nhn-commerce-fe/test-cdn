"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("core/index",[],t):"object"==typeof exports?exports["core/index"]=t():e["core/index"]=t()}(self,(()=>(self.webpackChunk_shopby_vanilla_components=self.webpackChunk_shopby_vanilla_components||[]).push([[687],{1586:(e,t,o)=>{o.r(t),o.d(t,{SHOPBY_ACTION:()=>l,SHOPBY_ELEMENT_PARAMETER:()=>n,ShopbyElement:()=>u,getShopbyAction:()=>r});var s=o(5373);const n={INITIALIZABLE:"shopby-initializable",QUERY:"shopby-query"},l="data-shopby-action",r=e=>{var t,o,s;if(!e)return"";return(null==(t=e.dataset)?void 0:t.shopbyAction)||(null==(s=null==(o=e.closest(`[${l}]`))?void 0:o.dataset)?void 0:s.shopbyAction)};var a=Object.defineProperty,i=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,d=(e,t,o)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))c.call(t,o)&&d(e,o,t[o]);if(i)for(var o of i(t))h.call(t,o)&&d(e,o,t[o]);return e};class u extends HTMLElement{constructor(){var e;console.log("constructor"),super(),this.templateMap=new Map,this.rendered=!1,this.state={},this.slotChange=e=>{if(this.rendered)return;const[t]=e.assignedElements();console.log("slot change element : ",t),console.log("slots : ",t.querySelectorAll("[slot]")),t.querySelectorAll("[slot]").forEach((({slot:e,outerHTML:t})=>{console.log("slotName : ",e),console.log("outerHTML : ",t),this.templateMap.set(e,t)})),this.rendered=!0,this.render(t.outerHTML)},this.insertSlotBy();try{const t=this.getAttribute(n.INITIALIZABLE),o=JSON.parse(null!=(e=this.getAttribute(n.QUERY))?e:"{}");console.log(o),!t&&this.setup(o),this.setEvent()}catch(e){console.error(e)}}insertSlotBy(e=this){e.attachShadow({mode:"open"}).innerHTML="<slot></slot>"}setup(e){}setState(e,t){if(this.state=p(p({},this.state),e),!t)return;const o=this.templateMap.get(t),s=this.querySelector(`[slot=${t}]`);this.render(o,s)}getState(){return this.state}setEvent(){}addEvent({eventType:e,eventMap:t,element:o=this}){o.addEventListener(e,(e=>{var o;const{target:s}=e,n=r(s);null==(o=null==t?void 0:t.get(n))||o(e)}))}render(e,t=this){console.log("this : ",this),console.log("render html : ",e),console.log("render element : ",t);const o=(0,s.compile)(e);t.innerHTML=o(this.state)}connectedCallback(){var e;const t=null==(e=this.shadowRoot)?void 0:e.querySelector("slot");t&&t.addEventListener("slotchange",(()=>this.slotChange(t)))}disconnectedCallback(){this.rendered=!1}adoptedCallback(){}attributeChangedCallback(e,t,o){}}u.ACTION_TYPE={}}},e=>(e.O(0,[373],(()=>(1586,e(e.s=1586)))),e.O())])));
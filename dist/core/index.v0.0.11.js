"use strict";(self.webpackChunk_shopby_vanilla_components=self.webpackChunk_shopby_vanilla_components||[]).push([[687],{1586:(t,e,s)=>{s.d(e,{T$:()=>h});var o=s(5373);var l=Object.defineProperty,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,e,s)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,c=(t,e)=>{for(var s in e||(e={}))r.call(e,s)&&i(t,s,e[s]);if(n)for(var s of n(e))a.call(e,s)&&i(t,s,e[s]);return t};class h extends HTMLElement{constructor(){var t;console.log("constructor"),super(),this.templateMap=new Map,this.rendered=!1,this.state={},this.slotChange=t=>{var e,s;if(this.rendered)return;const[o]=t.assignedElements();console.log("element : ",o),o&&(null==(s=null==(e=null==o?void 0:o.querySelectorAll("[slot]"))?void 0:e.forEach)||s.call(e,(({slot:t,outerHTML:e})=>{this.templateMap.set(t,e)}))),this.rendered=!0,this.render(null==o?void 0:o.outerHTML)},this.insertSlotBy();try{const e=this.getAttribute("shopby-initializable");console.log("initializable : ",e);const s=JSON.parse(null!=(t=this.getAttribute("shopby-query"))?t:"{}");console.log(s),!e&&this.setup(s),this.setEvent()}catch(t){console.error(t)}}insertSlotBy(t=this){t.attachShadow({mode:"open"}).innerHTML="<slot></slot>"}setup(t){}setState(t,e){this.state=c(c({},this.state),t);const s=this.templateMap.get(e),o=e?this.querySelector(`[slot=${e}]`):this;console.log("setState"),this.render(s,o)}getState(){return this.state}setEvent(){}addEvent({eventType:t,eventMap:e,element:s=this}){s.addEventListener(t,(t=>{var s;const{target:o}=t,l=(t=>{var e,s,o;if(!t)return"";return(null==(e=t.dataset)?void 0:e.shopbyAction)||(null==(o=null==(s=t.closest("[data-shopby-action]"))?void 0:s.dataset)?void 0:o.shopbyAction)})(o);null==(s=null==e?void 0:e.get(l))||s(t)}))}render(t,e=this){console.log("render : ");const s=t?(0,o.compile)(t):(0,o.compile)(this.outerHTML);e.innerHTML=s(this.state)}connectedCallback(){var t;const e=null==(t=this.shadowRoot)?void 0:t.querySelector("slot");e&&e.addEventListener("slotchange",(()=>this.slotChange(e)))}disconnectedCallback(){this.rendered=!1}adoptedCallback(){}attributeChangedCallback(t,e,s){}}h.ACTION_TYPE={}}},t=>{t.O(0,[373],(()=>(1586,t(t.s=1586)))),t.O()}]);